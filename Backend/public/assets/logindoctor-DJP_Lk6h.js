import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{f as c}from"./fetch-CGUiTqyx.js";import{s as t}from"./snackbar-BNtgsuzo.js";window.addEventListener("load",()=>{u()});const i=document.querySelector(".LoginUser");i.addEventListener("click",async r=>{r.preventDefault();const o=document.querySelector(".LoginForm"),a=o.querySelector('input[name="LoginEmail"]'),n=o.querySelector('input[name="LoginPassword"]'),l="http://127.0.0.1:3000/api/auth/doctor-login",m={username:a.value,password:n.value},s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)};try{const e=await c(l,s);console.log(e),localStorage.setItem("token",e.token),localStorage.setItem("user_id",e.user.user_id),localStorage.setItem("user_name",e.user.full_name),localStorage.setItem("user_email",e.user.username),t("Green","Kirjaudutaan sisään!"),setTimeout(()=>{window.location.href="../patientSelection/patientSelection.html"},3e3)}catch(e){console.error(e),t("Red","Error logging in")}});function u(){localStorage.removeItem("token"),localStorage.removeItem("user_id"),localStorage.removeItem("user_email"),localStorage.removeItem("user_name"),localStorage.removeItem("user_level"),localStorage.removeItem("Paired_doc_name"),localStorage.removeItem("doc_name"),localStorage.removeItem("full_name"),localStorage.removeItem("entry_count"),localStorage.removeItem("username"),localStorage.removeItem("patient_id")}
